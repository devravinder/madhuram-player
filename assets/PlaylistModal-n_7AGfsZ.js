import{G as e,H as t,I as n,K as r,W as i,X as a,_ as o,b as s,g as c,h as ee,k as l,m as u,p as te,q as d,u as f,v as p}from"./index-DxXLmhjs.js";var ne=t(`check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),re=t(`trash-2`,[[`path`,{d:`M10 11v6`,key:`nco0om`}],[`path`,{d:`M14 11v6`,key:`outv1u`}],[`path`,{d:`M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6`,key:`miytrc`}],[`path`,{d:`M3 6h18`,key:`d0wm0j`}],[`path`,{d:`M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2`,key:`e791ji`}]]),m=a(d(),1);function h(e,t,n){var r,i;typeof e==`function`?(r=t||[],i=n):(r=[],i=t);var a=m.useRef({hasResult:!1,result:i,error:null}),o=m.useReducer(function(e){return e+1},0);o[0];var s=o[1],c=m.useMemo(function(){var t=typeof e==`function`?e():e;if(!t||typeof t.subscribe!=`function`)throw e===t?TypeError(`Given argument to useObservable() was neither a valid observable nor a function.`):TypeError(`Observable factory given to useObservable() did not return a valid observable.`);if(!a.current.hasResult&&typeof window<`u`&&(typeof t.hasValue!=`function`||t.hasValue()))if(typeof t.getValue==`function`)a.current.result=t.getValue(),a.current.hasResult=!0;else{var n=t.subscribe(function(e){a.current.result=e,a.current.hasResult=!0});typeof n==`function`?n():n.unsubscribe()}return t},r);if(m.useDebugValue(a.current.result),m.useEffect(function(){var e=c.subscribe(function(e){var t=a.current;(t.error!==null||t.result!==e)&&(t.error=null,t.result=e,t.hasResult=!0,s())},function(e){var t=a.current;t.error!==e&&(t.error=e,s())});return typeof e==`function`?e:e.unsubscribe.bind(e)},r),a.current.error)throw a.current.error;return a.current.result}function ie(e,t,n){return h(function(){return p.liveQuery(e)},t||[],n)}typeof FinalizationRegistry<`u`&&new FinalizationRegistry(function(e){var t=p.DexieYProvider;t&&t.release(e)});var ae=r(),g=e();function _(e){let t=(0,ae.c)(71),{title:r,playlist:a,onClose:o}=e,s=ie(se),{setFavourites:d}=te(),p=i(),h=a.id,[_,v]=(0,m.useState)(a.name),[y,b]=(0,m.useState)(a.description||``),x;t[0]===a.songIds?x=t[1]:(x=new Set(a.songIds),t[0]=a.songIds,t[1]=x);let[S,C]=(0,m.useState)(x),w;t[2]!==a.description||t[3]!==a.name||t[4]!==a.songIds?(w=()=>{v(a.name),b(a.description||``),C(new Set(a.songIds))},t[2]=a.description,t[3]=a.name,t[4]=a.songIds,t[5]=w):w=t[5];let T;t[6]===a?T=t[7]:(T=[a],t[6]=a,t[7]=T),(0,m.useEffect)(w,T);let E;t[8]!==y||t[9]!==_||t[10]!==o||t[11]!==a.id||t[12]!==S||t[13]!==d?(E=()=>{let e=[...S];a.id?(c(a.id,{name:_,description:y||void 0,songIds:e}),a.id===`favourites`&&d(e)):u({name:_,description:y,songIds:e}),o()},t[8]=y,t[9]=_,t[10]=o,t[11]=a.id,t[12]=S,t[13]=d,t[14]=E):E=t[14];let D=E,O;t[15]!==h||t[16]!==p||t[17]!==o||t[18]!==a.id?(O=()=>{h&&(ee(a.id),o(),p({to:`/playlists`}))},t[15]=h,t[16]=p,t[17]=o,t[18]=a.id,t[19]=O):O=t[19];let k=O,A;t[20]===Symbol.for(`react.memo_cache_sentinel`)?(A=e=>{C(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},t[20]=A):A=t[20];let ce=A,j;t[21]===r?j=t[22]:(j=(0,g.jsx)(`h2`,{className:`text-xl font-bold`,children:r}),t[21]=r,t[22]=j);let M;t[23]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,g.jsx)(n,{size:20}),t[23]=M):M=t[23];let N;t[24]===o?N=t[25]:(N=(0,g.jsx)(`button`,{onClick:o,className:`cursor-pointer absolute top-8 right-8 p-2.5 bg-black/30 backdrop-blur-sm rounded-full hover:bg-black/50 transition-all`,children:M}),t[24]=o,t[25]=N);let P;t[26]!==j||t[27]!==N?(P=(0,g.jsxs)(`div`,{className:`px-8 py-4 flex items-center justify-between `,children:[j,N]}),t[26]=j,t[27]=N,t[28]=P):P=t[28];let F;t[29]===Symbol.for(`react.memo_cache_sentinel`)?(F=(0,g.jsx)(`label`,{className:`block text-sm font-medium mb-2`,children:`Name`}),t[29]=F):F=t[29];let I;t[30]===Symbol.for(`react.memo_cache_sentinel`)?(I=e=>v(e.target.value),t[30]=I):I=t[30];let L;t[31]===_?L=t[32]:(L=(0,g.jsxs)(`div`,{children:[F,(0,g.jsx)(l,{type:`text`,value:_,onChange:I,className:`input-field`})]}),t[31]=_,t[32]=L);let R;t[33]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,g.jsx)(`label`,{className:`block text-sm font-medium mb-2`,children:`Description`}),t[33]=R):R=t[33];let z;t[34]===Symbol.for(`react.memo_cache_sentinel`)?(z=e=>b(e.target.value),t[34]=z):z=t[34];let B;t[35]===y?B=t[36]:(B=(0,g.jsxs)(`div`,{children:[R,(0,g.jsx)(l,{as:`textarea`,value:y,onChange:z,className:`input-field resize-none h-16`})]}),t[35]=y,t[36]=B);let V;t[37]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,g.jsx)(`label`,{className:`block text-sm font-medium mb-2`,children:`Select Songs`}),t[37]=V):V=t[37];let H;t[38]===s?H=t[39]:(H=s||[],t[38]=s,t[39]=H);let U;if(t[40]!==S||t[41]!==H){let e;t[43]===S?e=t[44]:(e=e=>(0,g.jsxs)(`button`,{onClick:()=>ce(e.id),className:`w-full flex items-center gap-3 p-2 rounded-lg transition-colors ${S.has(e.id)?`bg-primary/20 text-primary`:`hover:bg-secondary`}`,children:[(0,g.jsx)(`img`,{src:e.coverUrl,alt:e.title,className:`w-10 h-10 rounded object-cover`}),(0,g.jsxs)(`div`,{className:`flex-1 text-left min-w-0`,children:[(0,g.jsx)(`p`,{className:`text-sm font-medium truncate`,children:e.title}),(0,g.jsx)(`p`,{className:`text-xs text-muted-foreground truncate`,children:e.artist})]}),S.has(e.id)&&(0,g.jsx)(ne,{size:18,className:`text-primary`})]},e.id),t[43]=S,t[44]=e),U=H.map(e),t[40]=S,t[41]=H,t[42]=U}else U=t[42];let W;t[45]===U?W=t[46]:(W=(0,g.jsxs)(`div`,{children:[V,(0,g.jsx)(`div`,{className:`space-y-2 max-h-48 overflow-y-auto border border-border rounded-xl p-2`,children:U})]}),t[45]=U,t[46]=W);let G;t[47]!==L||t[48]!==B||t[49]!==W?(G=(0,g.jsxs)(`div`,{className:`px-8 space-y-4 flex-1 overflow-y-auto`,children:[L,B,W]}),t[47]=L,t[48]=B,t[49]=W,t[50]=G):G=t[50];let K;t[51]!==h||t[52]!==k?(K=h&&(0,g.jsxs)(`button`,{onClick:k,className:`cursor-pointer p-2 px-4 rounded-lg text-destructive hover:text-primary hover:bg-accent/70 flex items-center gap-2`,children:[(0,g.jsx)(re,{size:18}),`Delete`]}),t[51]=h,t[52]=k,t[53]=K):K=t[53];let q;t[54]===o?q=t[55]:(q=(0,g.jsx)(`button`,{onClick:o,className:`cursor-pointer p-2 px-4 rounded-lg bg-primary/20 hover:bg-primary/30 text-primary`,children:`Cancel`}),t[54]=o,t[55]=q);let J;t[56]===_?J=t[57]:(J=_.trim(),t[56]=_,t[57]=J);let Y=!J,X;t[58]!==D||t[59]!==Y?(X=(0,g.jsx)(`button`,{onClick:D,className:`cursor-pointer p-2 px-4 rounded-lg bg-primary hover:bg-primary/90 text-secondary`,disabled:Y,children:`Save`}),t[58]=D,t[59]=Y,t[60]=X):X=t[60];let Z;t[61]!==q||t[62]!==X?(Z=(0,g.jsxs)(`div`,{className:`flex-1 flex flex-row justify-end gap-4`,children:[q,X]}),t[61]=q,t[62]=X,t[63]=Z):Z=t[63];let Q;t[64]!==K||t[65]!==Z?(Q=(0,g.jsxs)(`div`,{className:`px-8 pt-4 flex flex-row justify-between border-t border-border`,children:[K,Z]}),t[64]=K,t[65]=Z,t[66]=Q):Q=t[66];let $;return t[67]!==P||t[68]!==G||t[69]!==Q?($=(0,g.jsx)(f,{children:(0,g.jsx)(`div`,{className:`w-full max-w-md mx-auto h-full p-8 flex flex-col`,children:(0,g.jsxs)(`div`,{className:`relative py-4 flex-1 min-h-0 flex flex-col gap-4 bg-linear-to-br from-slate-900 to-slate-800 rounded-3xl shadow-2xl`,onClick:oe,children:[P,G,Q]})})}),t[67]=P,t[68]=G,t[69]=Q,t[70]=$):$=t[70],$}function oe(e){return e.stopPropagation()}function se(){return o.songs.toArray()}export{_ as t};