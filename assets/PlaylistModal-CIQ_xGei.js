import{t as e}from"./trash-2-BLYl5PnY.js";import{A as t,G as n,J as r,K as i,L as a,U as o,Z as s,g as c,h as ee,m as te,p as ne,q as l,u as re,v as u,x as d,y as f}from"./index-CNjHUMk6.js";var ie=o(`check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),p=s(r(),1);function m(e,t,n){var r,i;typeof e==`function`?(r=t||[],i=n):(r=[],i=t);var a=p.useRef({hasResult:!1,result:i,error:null}),o=p.useReducer(function(e){return e+1},0);o[0];var s=o[1],c=p.useMemo(function(){var t=typeof e==`function`?e():e;if(!t||typeof t.subscribe!=`function`)throw e===t?TypeError(`Given argument to useObservable() was neither a valid observable nor a function.`):TypeError(`Observable factory given to useObservable() did not return a valid observable.`);if(!a.current.hasResult&&typeof window<`u`&&(typeof t.hasValue!=`function`||t.hasValue()))if(typeof t.getValue==`function`)a.current.result=t.getValue(),a.current.hasResult=!0;else{var n=t.subscribe(function(e){a.current.result=e,a.current.hasResult=!0});typeof n==`function`?n():n.unsubscribe()}return t},r);if(p.useDebugValue(a.current.result),p.useEffect(function(){var e=c.subscribe(function(e){var t=a.current;(t.error!==null||t.result!==e)&&(t.error=null,t.result=e,t.hasResult=!0,s())},function(e){var t=a.current;t.error!==e&&(t.error=e,s())});return typeof e==`function`?e:e.unsubscribe.bind(e)},r),a.current.error)throw a.current.error;return a.current.result}function ae(e,t,n){return m(function(){return f.liveQuery(e)},t||[],n)}typeof FinalizationRegistry<`u`&&new FinalizationRegistry(function(e){var t=f.DexieYProvider;t&&t.release(e)});var oe=l(),h=i();function g(r){let i=(0,oe.c)(71),{title:o,playlist:s,onClose:l}=r,u=ae(ce),{setFavourites:d}=ne(),f=n(),m=s.id,[g,_]=(0,p.useState)(s.name),[v,y]=(0,p.useState)(s.description||``),b;i[0]===s.songIds?b=i[1]:(b=new Set(s.songIds),i[0]=s.songIds,i[1]=b);let[x,S]=(0,p.useState)(b),C;i[2]!==s.description||i[3]!==s.name||i[4]!==s.songIds?(C=()=>{_(s.name),y(s.description||``),S(new Set(s.songIds))},i[2]=s.description,i[3]=s.name,i[4]=s.songIds,i[5]=C):C=i[5];let w;i[6]===s?w=i[7]:(w=[s],i[6]=s,i[7]=w),(0,p.useEffect)(C,w);let T;i[8]!==v||i[9]!==g||i[10]!==l||i[11]!==s.id||i[12]!==x||i[13]!==d?(T=()=>{let e=[...x];s.id?(c(s.id,{name:g,description:v||void 0,songIds:e}),s.id===`favourites`&&d(e)):te({name:g,description:v,songIds:e}),l()},i[8]=v,i[9]=g,i[10]=l,i[11]=s.id,i[12]=x,i[13]=d,i[14]=T):T=i[14];let E=T,D;i[15]!==m||i[16]!==f||i[17]!==l||i[18]!==s.id?(D=()=>{m&&(ee(s.id),l(),f({to:`/playlists`}))},i[15]=m,i[16]=f,i[17]=l,i[18]=s.id,i[19]=D):D=i[19];let O=D,k;i[20]===Symbol.for(`react.memo_cache_sentinel`)?(k=e=>{S(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},i[20]=k):k=i[20];let A=k,j;i[21]===o?j=i[22]:(j=(0,h.jsx)(`h2`,{className:`text-xl font-bold`,children:o}),i[21]=o,i[22]=j);let M;i[23]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,h.jsx)(a,{size:20}),i[23]=M):M=i[23];let N;i[24]===l?N=i[25]:(N=(0,h.jsx)(`button`,{onClick:l,className:`cursor-pointer absolute top-8 right-8 p-2.5 bg-black/30 backdrop-blur-sm rounded-full hover:bg-black/50 transition-all`,children:M}),i[24]=l,i[25]=N);let P;i[26]!==j||i[27]!==N?(P=(0,h.jsxs)(`div`,{className:`px-8 py-4 flex items-center justify-between `,children:[j,N]}),i[26]=j,i[27]=N,i[28]=P):P=i[28];let F;i[29]===Symbol.for(`react.memo_cache_sentinel`)?(F=(0,h.jsx)(`label`,{className:`block text-sm font-medium mb-2`,children:`Name`}),i[29]=F):F=i[29];let I;i[30]===Symbol.for(`react.memo_cache_sentinel`)?(I=e=>_(e.target.value),i[30]=I):I=i[30];let L;i[31]===g?L=i[32]:(L=(0,h.jsxs)(`div`,{children:[F,(0,h.jsx)(t,{type:`text`,value:g,onChange:I,className:`input-field`})]}),i[31]=g,i[32]=L);let R;i[33]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,h.jsx)(`label`,{className:`block text-sm font-medium mb-2`,children:`Description`}),i[33]=R):R=i[33];let z;i[34]===Symbol.for(`react.memo_cache_sentinel`)?(z=e=>y(e.target.value),i[34]=z):z=i[34];let B;i[35]===v?B=i[36]:(B=(0,h.jsxs)(`div`,{children:[R,(0,h.jsx)(t,{as:`textarea`,value:v,onChange:z,className:`input-field resize-none h-16`})]}),i[35]=v,i[36]=B);let V;i[37]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,h.jsx)(`label`,{className:`block text-sm font-medium mb-2`,children:`Select Songs`}),i[37]=V):V=i[37];let H;i[38]===u?H=i[39]:(H=u||[],i[38]=u,i[39]=H);let U;if(i[40]!==x||i[41]!==H){let e;i[43]===x?e=i[44]:(e=e=>(0,h.jsxs)(`button`,{onClick:()=>A(e.id),className:`w-full flex items-center gap-3 p-2 rounded-lg transition-colors ${x.has(e.id)?`bg-primary/20 text-primary`:`hover:bg-secondary`}`,children:[(0,h.jsx)(`img`,{src:e.coverUrl,alt:e.title,className:`w-10 h-10 rounded object-cover`}),(0,h.jsxs)(`div`,{className:`flex-1 text-left min-w-0`,children:[(0,h.jsx)(`p`,{className:`text-sm font-medium truncate`,children:e.title}),(0,h.jsx)(`p`,{className:`text-xs text-muted-foreground truncate`,children:e.artist})]}),x.has(e.id)&&(0,h.jsx)(ie,{size:18,className:`text-primary`})]},e.id),i[43]=x,i[44]=e),U=H.map(e),i[40]=x,i[41]=H,i[42]=U}else U=i[42];let W;i[45]===U?W=i[46]:(W=(0,h.jsxs)(`div`,{children:[V,(0,h.jsx)(`div`,{className:`space-y-2 max-h-48 overflow-y-auto border border-border rounded-xl p-2`,children:U})]}),i[45]=U,i[46]=W);let G;i[47]!==L||i[48]!==B||i[49]!==W?(G=(0,h.jsxs)(`div`,{className:`px-8 space-y-4 flex-1 overflow-y-auto`,children:[L,B,W]}),i[47]=L,i[48]=B,i[49]=W,i[50]=G):G=i[50];let K;i[51]!==m||i[52]!==O?(K=m&&(0,h.jsxs)(`button`,{onClick:O,className:`cursor-pointer p-2 px-4 rounded-lg text-destructive hover:text-primary hover:bg-accent/70 flex items-center gap-2`,children:[(0,h.jsx)(e,{size:18}),`Delete`]}),i[51]=m,i[52]=O,i[53]=K):K=i[53];let q;i[54]===l?q=i[55]:(q=(0,h.jsx)(`button`,{onClick:l,className:`cursor-pointer p-2 px-4 rounded-lg bg-primary/20 hover:bg-primary/30 text-primary`,children:`Cancel`}),i[54]=l,i[55]=q);let J;i[56]===g?J=i[57]:(J=g.trim(),i[56]=g,i[57]=J);let Y=!J,X;i[58]!==E||i[59]!==Y?(X=(0,h.jsx)(`button`,{onClick:E,className:`cursor-pointer p-2 px-4 rounded-lg bg-primary hover:bg-primary/90 text-secondary`,disabled:Y,children:`Save`}),i[58]=E,i[59]=Y,i[60]=X):X=i[60];let Z;i[61]!==q||i[62]!==X?(Z=(0,h.jsxs)(`div`,{className:`flex-1 flex flex-row justify-end gap-4`,children:[q,X]}),i[61]=q,i[62]=X,i[63]=Z):Z=i[63];let Q;i[64]!==K||i[65]!==Z?(Q=(0,h.jsxs)(`div`,{className:`px-8 pt-4 flex flex-row justify-between border-t border-border`,children:[K,Z]}),i[64]=K,i[65]=Z,i[66]=Q):Q=i[66];let $;return i[67]!==P||i[68]!==G||i[69]!==Q?($=(0,h.jsx)(re,{children:(0,h.jsx)(`div`,{className:`w-full max-w-md mx-auto h-full p-8 flex flex-col`,children:(0,h.jsxs)(`div`,{className:`relative py-4 flex-1 min-h-0 flex flex-col gap-4 bg-linear-to-br from-slate-900 to-slate-800 rounded-3xl shadow-2xl`,onClick:se,children:[P,G,Q]})})}),i[67]=P,i[68]=G,i[69]=Q,i[70]=$):$=i[70],$}function se(e){return e.stopPropagation()}function ce(){return u.songs.toArray()}export{g as t};