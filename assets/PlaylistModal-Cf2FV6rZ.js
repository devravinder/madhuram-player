import{t as e}from"./trash-2-CmfLHKCZ.js";import{C as t,E as n,G as r,I as i,K as a,_ as o,b as s,et as c,nt as l,ot as u,p as ee,q as te,rt as d,u as ne,v as re,w as f,y as ie}from"./index-CXaSG4oJ.js";var ae=c(`check`,[[`path`,{d:`M20 6 9 17l-5-5`,key:`1gmf2c`}]]),p=u(d(),1);function m(e,t,n){var r,i;typeof e==`function`?(r=t||[],i=n):(r=[],i=t);var a=p.useRef({hasResult:!1,result:i,error:null}),o=p.useReducer(function(e){return e+1},0);o[0];var s=o[1],c=p.useMemo(function(){var t=typeof e==`function`?e():e;if(!t||typeof t.subscribe!=`function`)throw e===t?TypeError(`Given argument to useObservable() was neither a valid observable nor a function.`):TypeError(`Observable factory given to useObservable() did not return a valid observable.`);if(!a.current.hasResult&&typeof window<`u`&&(typeof t.hasValue!=`function`||t.hasValue()))if(typeof t.getValue==`function`)a.current.result=t.getValue(),a.current.hasResult=!0;else{var n=t.subscribe(function(e){a.current.result=e,a.current.hasResult=!0});typeof n==`function`?n():n.unsubscribe()}return t},r);if(p.useDebugValue(a.current.result),p.useEffect(function(){var e=c.subscribe(function(e){var t=a.current;(t.error!==null||t.result!==e)&&(t.error=null,t.result=e,t.hasResult=!0,s())},function(e){var t=a.current;t.error!==e&&(t.error=e,s())});return typeof e==`function`?e:e.unsubscribe.bind(e)},r),a.current.error)throw a.current.error;return a.current.result}function h(e,t,n){return m(function(){return f.liveQuery(e)},t||[],n)}typeof FinalizationRegistry<`u`&&new FinalizationRegistry(function(e){var t=f.DexieYProvider;t&&t.release(e)});var oe=l(),g=a();function _(t){let n=(0,oe.c)(71),{title:a,playlist:c,onClose:l}=t,u=h(ce),{setFavourites:d}=o(),f=r(),m=c.id,[_,v]=(0,p.useState)(c.name),[y,b]=(0,p.useState)(c.description||``),x;n[0]===c.songIds?x=n[1]:(x=new Set(c.songIds),n[0]=c.songIds,n[1]=x);let[S,C]=(0,p.useState)(x),w;n[2]!==c.description||n[3]!==c.name||n[4]!==c.songIds?(w=()=>{v(c.name),b(c.description||``),C(new Set(c.songIds))},n[2]=c.description,n[3]=c.name,n[4]=c.songIds,n[5]=w):w=n[5];let T;n[6]===c?T=n[7]:(T=[c],n[6]=c,n[7]=T),(0,p.useEffect)(w,T);let E;n[8]!==y||n[9]!==_||n[10]!==l||n[11]!==c.id||n[12]!==S||n[13]!==d?(E=()=>{let e=[...S];c.id?(s(c.id,{name:_,description:y||void 0,songIds:e}),c.id===`favourites`&&d(e)):re({name:_,description:y,songIds:e}),l()},n[8]=y,n[9]=_,n[10]=l,n[11]=c.id,n[12]=S,n[13]=d,n[14]=E):E=n[14];let D=E,O;n[15]!==m||n[16]!==f||n[17]!==l||n[18]!==c.id?(O=()=>{m&&(ie(c.id),l(),f({to:`/playlists`}))},n[15]=m,n[16]=f,n[17]=l,n[18]=c.id,n[19]=O):O=n[19];let k=O,A;n[20]===Symbol.for(`react.memo_cache_sentinel`)?(A=e=>{C(t=>{let n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},n[20]=A):A=n[20];let le=A,j;n[21]===a?j=n[22]:(j=(0,g.jsx)(`h2`,{className:`text-xl font-bold`,children:a}),n[21]=a,n[22]=j);let M;n[23]===Symbol.for(`react.memo_cache_sentinel`)?(M=(0,g.jsx)(te,{size:20}),n[23]=M):M=n[23];let N;n[24]===l?N=n[25]:(N=(0,g.jsx)(`button`,{onClick:l,className:`cursor-pointer absolute top-8 right-8 p-2.5 bg-black/30 backdrop-blur-sm rounded-full hover:bg-black/50 transition-all`,children:M}),n[24]=l,n[25]=N);let P;n[26]!==j||n[27]!==N?(P=(0,g.jsxs)(`div`,{className:`px-8 py-4 flex items-center justify-between `,children:[j,N]}),n[26]=j,n[27]=N,n[28]=P):P=n[28];let F;n[29]===Symbol.for(`react.memo_cache_sentinel`)?(F=(0,g.jsx)(`label`,{className:`block text-sm font-medium mb-2`,children:`Name`}),n[29]=F):F=n[29];let I;n[30]===Symbol.for(`react.memo_cache_sentinel`)?(I=e=>v(e.target.value),n[30]=I):I=n[30];let L;n[31]===_?L=n[32]:(L=(0,g.jsxs)(`div`,{children:[F,(0,g.jsx)(i,{type:`text`,value:_,onChange:I,className:`input-field`})]}),n[31]=_,n[32]=L);let R;n[33]===Symbol.for(`react.memo_cache_sentinel`)?(R=(0,g.jsx)(`label`,{className:`block text-sm font-medium mb-2`,children:`Description`}),n[33]=R):R=n[33];let z;n[34]===Symbol.for(`react.memo_cache_sentinel`)?(z=e=>b(e.target.value),n[34]=z):z=n[34];let B;n[35]===y?B=n[36]:(B=(0,g.jsxs)(`div`,{children:[R,(0,g.jsx)(i,{as:`textarea`,value:y,onChange:z,className:`input-field resize-none h-16`})]}),n[35]=y,n[36]=B);let V;n[37]===Symbol.for(`react.memo_cache_sentinel`)?(V=(0,g.jsx)(`label`,{className:`block text-sm font-medium mb-2`,children:`Select Songs`}),n[37]=V):V=n[37];let H;n[38]===u?H=n[39]:(H=u||[],n[38]=u,n[39]=H);let U;if(n[40]!==S||n[41]!==H){let e;n[43]===S?e=n[44]:(e=e=>(0,g.jsxs)(`button`,{onClick:()=>le(e.id),className:`w-full flex items-center gap-3 p-2 rounded-lg transition-colors ${S.has(e.id)?`bg-primary/20 text-primary`:`hover:bg-secondary`}`,children:[(0,g.jsx)(ne,{id:e.coverImageId,alt:e.title,className:`w-10 h-10 rounded`}),(0,g.jsxs)(`div`,{className:`flex-1 text-left min-w-0`,children:[(0,g.jsx)(`p`,{className:`text-sm font-medium truncate`,children:e.title}),(0,g.jsx)(`p`,{className:`text-xs text-muted-foreground truncate`,children:e.artist})]}),S.has(e.id)&&(0,g.jsx)(ae,{size:18,className:`text-primary`})]},e.id),n[43]=S,n[44]=e),U=H.map(e),n[40]=S,n[41]=H,n[42]=U}else U=n[42];let W;n[45]===U?W=n[46]:(W=(0,g.jsxs)(`div`,{children:[V,(0,g.jsx)(`div`,{className:`space-y-2 max-h-48 overflow-y-auto border border-border rounded-xl p-2`,children:U})]}),n[45]=U,n[46]=W);let G;n[47]!==L||n[48]!==B||n[49]!==W?(G=(0,g.jsxs)(`div`,{className:`px-8 space-y-4 flex-1 overflow-y-auto`,children:[L,B,W]}),n[47]=L,n[48]=B,n[49]=W,n[50]=G):G=n[50];let K;n[51]!==m||n[52]!==k?(K=m&&(0,g.jsxs)(`button`,{onClick:k,className:`cursor-pointer p-2 px-4 rounded-lg text-destructive hover:text-primary hover:bg-accent/70 flex items-center gap-2`,children:[(0,g.jsx)(e,{size:18}),`Delete`]}),n[51]=m,n[52]=k,n[53]=K):K=n[53];let q;n[54]===l?q=n[55]:(q=(0,g.jsx)(`button`,{onClick:l,className:`cursor-pointer p-2 px-4 rounded-lg bg-primary/20 hover:bg-primary/30 text-primary`,children:`Cancel`}),n[54]=l,n[55]=q);let J;n[56]===_?J=n[57]:(J=_.trim(),n[56]=_,n[57]=J);let Y=!J,X;n[58]!==D||n[59]!==Y?(X=(0,g.jsx)(`button`,{onClick:D,className:`cursor-pointer p-2 px-4 rounded-lg bg-primary hover:bg-primary/90 text-secondary`,disabled:Y,children:`Save`}),n[58]=D,n[59]=Y,n[60]=X):X=n[60];let Z;n[61]!==q||n[62]!==X?(Z=(0,g.jsxs)(`div`,{className:`flex-1 flex flex-row justify-end gap-4`,children:[q,X]}),n[61]=q,n[62]=X,n[63]=Z):Z=n[63];let Q;n[64]!==K||n[65]!==Z?(Q=(0,g.jsxs)(`div`,{className:`px-8 pt-4 flex flex-row justify-between border-t border-border`,children:[K,Z]}),n[64]=K,n[65]=Z,n[66]=Q):Q=n[66];let $;return n[67]!==P||n[68]!==G||n[69]!==Q?($=(0,g.jsx)(ee,{children:(0,g.jsx)(`div`,{className:`w-full max-w-md mx-auto h-full p-8 flex flex-col`,children:(0,g.jsxs)(`div`,{className:`relative py-4 flex-1 min-h-0 flex flex-col gap-4 bg-linear-to-br from-slate-900 to-slate-800 rounded-3xl shadow-2xl`,onClick:se,children:[P,G,Q]})})}),n[67]=P,n[68]=G,n[69]=Q,n[70]=$):$=n[70],$}function se(e){return e.stopPropagation()}function ce(){return t.songs.toArray()}export{_ as t};